## 写在前面

我发现对于我们非英语母语者，阅读一份充斥着专业名词的全英文讲义是非常困难的。使用一些翻译软件逐句翻译太慢了，而且时常翻译了后面忘了前面。截图给 AI，让 AI 帮忙解释，需要一页一页的截图，效率太低了，而且回溯起来非常低效。于是，我写一个简单的程序自动化整个过程。但是最近，我发现我的室友也存在着一样的困扰，于是便丰富了前端，制作了这个项目，使得非计算机相关专业的同学也可以享受 AI 时代的便利，进而提高学习效率。

## PDF 智能分析助手

将 PDF 转为图片并用 AI 分析每页内容的本地工具，支持实时进度、结果预览、ZIP 下载与文件管理。适合快速理解英文讲义、技术文档、报告等。

## ✨ 主要功能

### 核心功能

- **PDF 文件上传** - 支持拖拽上传，最大 50MB
- **智能分析** - 使用 AI 模型分析 PDF 每页内容
- **实时进度** - 显示处理进度，支持随时取消
- **文件管理** - 查看、下载、删除已处理的文件

### 新增功能

- **ZIP 下载** - 下载所有页面的分析结果为 ZIP 压缩文件
- **预览功能** - 全新的预览界面，浏览 PDF 每一页的分析结果
- **任务取消** - 可以在处理过程中随时终止任务
- **文件删除** - 可以删除不需要的 PDF 文件及其所有相关文件

## 使用方法（简明）

### 开发运行（用于调试）

```bash
# 安装依赖
cd backend && pip install -r requirements.txt
# 一键启动（自动启动后端与前端，前端端口动态选择 8080-8085）
cd .. && python start_all.py
```

### 打包运行（给非技术同学使用）

```bash
# 生成可执行文件与启动器
python build_exe.py
# 双击运行 dist/启动PDF智能分析助手.bat
```

说明：

- 前端端口会在 8080-8085 中自动选择一个可用端口；后端固定在 http://localhost:5000。
- 若浏览器未自动打开，请以控制台打印的“前端地址”为准手动访问。
- 打包运行时，数据保存在可执行文件同级目录下的 files/（uploads/images/explanations）。

## 基本步骤

1. 在页面顶部填写 API Key 和 API Base，点击“保存配置”和“测试连接”。
2. 上传 PDF（支持拖拽，最大 50MB），点击“上传并开始分析”。
3. 在“文件管理”中预览、下载（ZIP）或删除结果。

## 🔧 配置说明

### API 配置

在应用界面中配置以下参数：

- **API Key**: 您的 OpenAI API 密钥
- **API Base URL**: API 服务地址（默认：https://api.openai.com/v1）
- **模型名称**: 使用的模型（默认：gpt-4.1-2025-04-14）
- **系统提示词**: 自定义分析提示词

### 环境变量

也可以通过环境变量配置：

```bash
export ZETATECHS_API_KEY="your-api-key"
export ZETATECHS_API_BASE="https://api.openai.com/v1"
```

## 依赖要求

- Python 3.8+
- Windows 用户需安装 Poppler：`https://github.com/oschwartz10612/poppler-windows/releases/`

## 🛠️ 技术栈

### 后端

- **Flask** - Web 框架
- **pdf2image** - PDF 转图片
- **OpenAI** - AI 模型接口
- **Werkzeug** - 文件上传处理
- **zipfile** - ZIP 文件生成

### 前端

- **HTML5** - 页面结构
- **Bootstrap 5** - UI 框架
- **JavaScript ES6** - 交互逻辑
- **Font Awesome** - 图标库
- **Marked.js** - Markdown 渲染

## 📋 功能详解

### 主页面功能

主页面集成了所有核心功能，包括：

- **API 配置区域**: 配置 AI 模型参数和系统提示词
- **文件上传区域**: 支持拖拽上传 PDF 文件，最大 50MB
- **文件管理区域**: 查看、预览、下载、删除已处理的文件
- **任务管理区域**: 显示处理进度和任务状态

<div align="center">
  <img src="images/home_page.png" alt="主页面功能" width="60%" style="border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
</div>

### 预览功能

预览界面提供专门的分析结果浏览体验：

- **功能描述**: 提供全新的预览界面，浏览 PDF 每一页的分析结果
- **界面特性**:
  - 单列布局，居中显示分析结果内容
  - 页面导航：上一页/下一页按钮
  - 键盘导航：支持左右箭头键切换页面
  - 响应式设计：支持不同屏幕尺寸
  - 优化阅读：大字体、合适的行间距

<div align="center">
  <img src="images/preview.png" alt="预览功能" width="60%" style="border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
</div>

### ZIP 下载功能

- **功能描述**: 下载 PDF 文件的所有分析结果为 ZIP 压缩文件
- **包含内容**: 所有页面的 Markdown 格式分析结果
- **文件结构**:
  ```
  {PDF名称}_explanations.zip
  ├── {PDF名称}_explanations/      # 分析结果目录
  │   ├── page_001.md              # 第1页分析结果
  │   ├── page_002.md              # 第2页分析结果
  │   └── ...
  └── {PDF名称}_README.txt         # 说明文件
  ```

### 任务管理

- **实时进度**: 显示处理进度和状态信息
- **任务取消**: 可以随时取消正在处理的任务
- **文件删除**: 删除 PDF 文件及其所有相关文件
- **状态跟踪**: 实时更新任务状态和错误信息

## 🔒 安全说明

- API 密钥仅存储在本地，不会上传到服务器
- 所有文件处理都在本地进行
- 支持删除功能，保护用户隐私
- 支持任务取消，避免资源浪费

## 🎯 使用场景

1. **学术研究** - 分析学术论文、研究报告
2. **文档审查** - 快速理解复杂的技术文档
3. **内容提取** - 从 PDF 中提取结构化信息
4. **教育培训** - 将 PDF 教材转换为可交互的学习材料
5. **法律文档** - 分析合同、法规等法律文件

## 🐛 故障排除

### 常见问题

1. **PDF 转换失败**

   - 检查 Poppler 是否正确安装
   - 确认 PDF 文件没有密码保护
   - 检查文件大小是否超过 50MB

2. **API 连接失败**

   - 检查 API Key 是否正确
   - 确认网络连接正常
   - 验证 API Base URL 格式

3. **预览页面无法打开**

   - 检查浏览器是否阻止了弹出窗口
   - 确认 PDF 文件已完成分析处理
   - 刷新页面重试

4. **下载功能异常**
   - 检查文件是否已完成分析
   - 确认有足够的磁盘空间
   - 查看浏览器控制台错误信息

### 调试模式

- 打开浏览器开发者工具查看控制台日志
- 检查后端日志输出
- 验证 API 响应数据格式

## 📝 更新日志

### v2.0.0 (最新版本)

- ✅ 添加 ZIP 下载功能（仅包含解释文档）
- ✅ 添加预览功能（仅显示解释内容）
- ✅ 优化用户界面和交互体验
- ✅ 简化加载逻辑，提升性能
- ✅ 完善错误处理和用户反馈

### v1.0.0

- ✅ 基础 PDF 分析功能
- ✅ 文件上传和管理
- ✅ 实时进度显示
- ✅ 取消处理功能
- ✅ 文件删除功能
- ✅ 结果导出功能

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来改进项目。

### 开发环境设置

1. Fork 项目到您的 GitHub 账户
2. 克隆您的 Fork 到本地
3. 创建新的功能分支
4. 提交您的更改
5. 推送到您的分支
6. 创建 Pull Request

### 代码规范

- 使用 Python PEP 8 代码风格
- 使用 JavaScript ES6+ 语法
- 添加适当的注释和文档
- 编写清晰的提交信息

## 📄 许可证

本项目采用 MIT 许可证。详情请参阅 [LICENSE](LICENSE) 文件。

## 📞 支持

如有问题，请通过以下方式获取帮助：

1. 查看本文档的故障排除部分
2. 在 GitHub 上提交 Issue
3. 联系项目维护者

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

---

**PDF 智能分析助手** - 让 PDF 文档分析变得简单高效！
